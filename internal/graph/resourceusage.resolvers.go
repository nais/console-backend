package graph

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen

import (
	"context"

	"github.com/nais/console-backend/internal/graph/model"
	"github.com/nais/console-backend/internal/graph/scalar"
)

// ResourceUtilizationForApp is the resolver for the resourceUtilizationForApp field.
func (r *queryResolver) ResourceUtilizationForApp(ctx context.Context, resource model.ResourceType, env string, team string, app string, from *scalar.Date, to *scalar.Date, resolution *model.Resolution) ([]model.ResourceUtilization, error) {
	start, end, step, err := r.getStartEndAndStep(from, to, resolution)
	if err != nil {
		return nil, err
	}

	if resource == model.ResourceTypeMemory {
		return r.resourceUsageClient.MemoryUtilizationForApp(ctx, env, team, app, start, end, step)
	}

	return r.resourceUsageClient.CPUUtilizationForApp(ctx, env, team, app, start, end, step)
}
